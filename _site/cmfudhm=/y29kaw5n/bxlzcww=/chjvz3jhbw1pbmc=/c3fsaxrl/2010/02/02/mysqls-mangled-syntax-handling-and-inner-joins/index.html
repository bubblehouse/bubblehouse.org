
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>MySQLs mangled syntax handling and INNER JOINs</title>
    
    <meta name="author" content="Phil Christensen">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Bubblehouse</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
  
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h1>MySQLs mangled syntax handling and INNER JOINs </h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>02 February 2010</span>
    </div>
    <div class="content">
      <p>As my DBA skills have progressed over the years, I’m always impressed and upset to see the extent to which MySQL has allowed me to use terrible syntax generally not accepted by standards-compliant SQL servers.</p>

<p>A recent one really blew me away, because it exposed a lack of understanding on my part about how to understand the syntax of JOIN commands.</p>

<p>This is how I always built nested JOIN queries. The premise is that semantically you are always selecting from a single table; the use of the INNER JOIN statement is treated like a function that returns a compound table.</p>
<div style='text-align:left;color:#ffffff; background-color:#000000; border:solid black 1px; padding:0.5em 1em 0.5em 1em; overflow:auto;font-size:small; font-family:monospace; '><span style='color:#dfb098;'>SELECT</span> r.name <span style='color:#dfb098;'>AS</span> <span style='color:#dfb098;'>role</span>, p.name <span style='color:#dfb098;'>AS</span> permission<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#dfb098;'>FROM</span> <span style='color:#dfb098;'>role</span> r<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#dfb098;'>INNER</span> <span style='color:#dfb098;'>JOIN</span> (role_permission rp<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#dfb098;'>INNER</span> <span style='color:#dfb098;'>JOIN</span> permission p <span style='color:#dfb098;'>ON</span> (rp.permission_id = p.<span style='color:#dfb098;'>id</span>))<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#dfb098;'>ON</span> (rp.role_id = r.<span style='color:#dfb098;'>id</span>)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#dfb098;'>ORDER</span> <span style='color:#dfb098;'>BY</span> r.name, p.name<br />
<br />
</div>
<p>However, when trying to run this same snippet against an SQLite3 database, I would continue to get a <span class='error'>no such column: p.name</span> error. After some research, I found the preferable way to do nested joins is much simpler, if less semantically pleasing:</p>
<div style='text-align:left;color:#ffffff; background-color:#000000; border:solid black 1px; padding:0.5em 1em 0.5em 1em; overflow:auto;font-size:small; font-family:monospace; '><span style='color:#dfb098;'>SELECT</span> r.name <span style='color:#dfb098;'>AS</span> <span style='color:#dfb098;'>role</span>, p.name <span style='color:#dfb098;'>AS</span> permission<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#dfb098;'>FROM</span> <span style='color:#dfb098;'>role</span> r<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#dfb098;'>INNER</span> <span style='color:#dfb098;'>JOIN</span> role_permission rp <span style='color:#dfb098;'>ON</span> rp.role_id = r.<span style='color:#dfb098;'>id</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#dfb098;'>INNER</span> <span style='color:#dfb098;'>JOIN</span> permission p <span style='color:#dfb098;'>ON</span> rp.permission_id = p.<span style='color:#dfb098;'>id</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#dfb098;'>ORDER</span> <span style='color:#dfb098;'>BY</span> r.name, p.name<br />
</div>
<p>This works for me properly in both SQLite and MySQL. I’m curious what it was that made me ever start writing nested JOINs in the former method; it was fairly error-prone due to missing parenthesis, etc.</p>
    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#cmfudhm=-ref">
    		cmfudhm= <span>12</span>
    	</a></li>
     
    	<li><a href="/categories.html#y29kaw5n-ref">
    		y29kaw5n <span>22</span>
    	</a></li>
     
    	<li><a href="/categories.html#bxlzcww=-ref">
    		bxlzcww= <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#chjvz3jhbw1pbmc=-ref">
    		chjvz3jhbw1pbmc= <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#c3fsaxrl-ref">
    		c3fsaxrl <span>1</span>
    	</a></li>
    
  


    </ul>
    

    

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2010/01/13/bass-notes-for-seaflux-tunes" title="bass notes for seaflux tunes">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/y29kaw5n/chjvz3jhbw1pbmc=/dhdpc3rlza==/bw9kdq==/c29mdhdhcmu=/cmvszwfzzq==/2010/02/09/modu-version-1-0-released" title="modu version 1.0 released!!!">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    
  </div>
</div>


      </div>
      <hr>
      <footer>
        <p>&copy; 2014 Phil Christensen
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    
  </body>
</html>

