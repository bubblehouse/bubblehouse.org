
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Nice New Things</title>
    
    <meta name="author" content="Phil Christensen">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Bubblehouse</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
  
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h1>Nice New Things </h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>24 September 2003</span>
    </div>
    <div class="content">
      <p>So right away I have something to show anyone who wants to look. I&#8217;ve been thinking about the whole RExec/Bastion problem, and I may have come up with a solution. I&#8217;d also certainly appreciate it if anyone could fill me in with any obvious security flaws</p><p>Check out <A HREF='http://bubblehouse.org/cgi-bin/viewcvs.cgi/*checkout*/SaferPython/safer.py?content-type=text/plain'>SaferPython</A>. It is my attempt to rewrite a restricted environment for Python. Admittedly, I don&#8217;t think I know enough about the new language features to be sure if this works. I&#8217;ve tried a number of &#8220;exploits&#8221;, and this seems to provide the kind of protection <strong>I</strong> want, but I&#8217;m pretty sure it doesn&#8217;t have the abilities that some RExec users need.</p><p>I wrote this based upon the following premises:</p><ul>
    <li>That my primary goal is to offer some sort of scripting enviroment, even if it is only a subset of the Python language. Call it PythonScript or something (ah, jk, I think that already exists)&#8230;</li>
    <li>That any class/object that I could want in the restricted environment would be accessible to me ahead of time.</li>
    <li>That none of the objects in this environment can return anything but safe objects</li>
</ul><p>For the moment, I can be sure the the classes are secure, since importing is disabled from inside the environment. Only classes/objects that are imported explicitly are available.</p><p>The way you&#8217;d use it would be something like this:</p><pre>
from safer import *
import string

# defaults to using the NameChecker class for permissions
env = Armory()
# we insert objects that we want to access, including any modules
# or built-in functions
env.insert('string', string) #the string module
env.insert('str', str)       #the str() built-in/type

# we can also specify other IPermission implementations
class myClass(object):
    pass
env.insert('MyClass', MyClass, ClassProtection)

env.r_exec(someUntrustedCode)
</pre><p>The manual insertion of <em>ALL</em> language objects is a bit of a pain, but this can be automated once I figure out what classes/objects are 100% safe for this environment. Although there is support for creating new instances of protected (Shielded) class objects, they are currently returned unrestricted. I&#8217;m planning on fixing this once I figure out a nice way to do it.</p>
    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#aw5uzxjzcgfjzq==-ref">
    		aw5uzxjzcgfjzq== <span>12</span>
    	</a></li>
     
    	<li><a href="/categories.html#y29kaw5n-ref">
    		y29kaw5n <span>22</span>
    	</a></li>
    
  


    </ul>
    

    

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/aw5uzxjzcgfjzq==/y29kaw5n/2003/09/23/ch-ch-ch-ch-changes" title="Ch-ch-ch-ch-changes...">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/bxvzawm=/dhvuzxm=/2003/10/13/protools-nonsense" title="protools nonsense">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    
  </div>
</div>


      </div>
      <hr>
      <footer>
        <p>&copy; 2014 Phil Christensen
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    
  </body>
</html>

